= render "projects/officer_nav"

= form_for @project do |f|
  = f.label :posted_at, "Live?"
  .switch{"data-on-label" => "Yes", "data-off-label" => "No"}
    = f.check_box :posted_at

  = f.label :title
  = f.text_field :title, class: "span4"

  = f.label :tags
  = f.text_field :tags, value: @project.tags.map(&:name).join(",")

  :javascript
    $("#project_tags").select2({
      tags: #{Tag.all_for_select2.to_json},
      tokenSeparators: [','],
      width: "resolve"
    });

  = f.label :bids_due_at
  = f.datetime_select :bids_due_at, {}, style: "width: 100px;"

  %div
    %label Amendments

    - if @project.amendments.length > 0
      %ul
        - @project.amendments.each do |amendment|
          %li
            %a{"href" => edit_project_amendment_path(@project, amendment)}= amendment.title || amendment.id
    - else
      %div No amendments.

    =link_to "New Amendment", project_amendments_path(@project), method: :post

  = f.label :abstract
  = f.text_area :abstract

  = f.label :body
  - if @pad
    #etherpad.readable-width
      :javascript
        $("#etherpad").pad({padId: '#{@pad.id}'})
  - else
    = f.text_area :body

  .form-actions
    = f.submit "Update Project", class: "btn btn-inverse"